# PostgreSQL Configuration for FridgeOS Time-Series Data
# Optimized for moderate workload with frequent inserts and time-range queries

# Memory Settings
shared_buffers = 256MB                    # 25% of available RAM (assuming 1GB container)
effective_cache_size = 1GB                # Estimate of OS cache + shared_buffers
work_mem = 4MB                            # Memory for sorting/hash operations
maintenance_work_mem = 64MB               # Memory for maintenance operations

# Checkpoint Settings
checkpoint_completion_target = 0.9        # Spread checkpoints over 90% of interval
wal_buffers = 16MB                        # WAL buffer size
checkpoint_timeout = 10min                # Checkpoint frequency

# Query Planner Settings
default_statistics_target = 100           # Statistics sampling for query planning
random_page_cost = 1.1                    # Assumes SSD storage
effective_io_concurrency = 200            # Number of concurrent I/O operations

# Connection Settings
max_connections = 100                      # Reasonable for small setup

# Time-Series Specific Optimizations
# These are especially good for TimescaleDB
synchronous_commit = off                   # Better performance for bulk inserts
wal_level = replica                        # Needed for TimescaleDB features
max_wal_senders = 1                        # For potential replication

# Logging (optional - helpful for debugging)
log_min_duration_statement = 1000          # Log queries taking > 1 second
log_checkpoints = on
log_connections = on
log_disconnections = on 